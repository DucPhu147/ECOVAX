<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Đăng nhập vào hệ thống</title>
    <link rel="icon" type="image/png" href="~/Content/image/logo.png" />
    <link href="~/Content/bootstrap/bootstrap.min.css" rel="stylesheet" />
    <link rel="canonical" href="https://getbootstrap.com/docs/4.5/examples/floating-labels/">
    <link href="~/Content/floating-labels.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.3/dist/jquery.validate.min.js"></script>
    <script src="~/Scripts/index.js"></script>
    <link href="~/Content/index.css" rel="stylesheet" />
    <style>
        .brand-logo {
            width: 40px;
        }

        .background-img-container {
            width: 80%;
            text-align: center;
        }

            .background-img-container img {
                width: 90%;
            }
    </style>
    <script>
        $("#loginForm").validate({
            errorPlacement: function (error, element) {
                error.insertAfter(element);  // default placement for everything else
            },
            rules: {
                TenDangNhap: {
                    required: true,
                },
                MatKhau: {
                    required: true,
                },
            }
        });
        $("#btnLogin").on('click', function () {
            $.ajax({
                type: "POST",
                dataType: "json",
                data: {
                    tenDN: $("#inputAccount").val(),
                    mk: $("#inputPassword").val()
                },
                contentType: "application/json; charset=utf-8",
                url: '/DangNhap/BeginLogin',
                success: function (jsonResult) {

                },
                error: function () {
                    showDangerAlert("Tên đăng nhập hoặc mật khẩu không đúng");
                },
                complete: function () {
                    const timeOut = setTimeout(function () {
                        windowUnlock();
                        clearTimeout(timeOut);
                    }, 200);
                }
            });
        });
    </script>
</head>
<body>
    <div class="window_lock_background window_loading_screen" id="windowLoadingScreen">
        <div class="lds-ellipsis">
            <div></div><div></div><div></div><div></div>
        </div>
    </div>

    <div class="alert alert-success" role="alert" id="alertDialog">
        This is a warning alert—check it out!
    </div>
    <div class="container-fluid d-flex justify-content-between">
        <div class="w-100 justify-content-center d-flex">
            @using (Html.BeginForm("BeginLogin", "DangNhap",
                FormMethod.Post, new { id = "loginForm", @class = "form-signin" }))
            {
                <div class="text-center mb-5">
                    <img src="~/Content/image/logo.png" class="brand-logo" />
                    <h4>Cổng tiêm chủng E-COVAX</h4>
                </div>
                <div class="form-label-group">
                    <input type="text" id="inputAccount" name="TenDangNhap" class="form-control" placeholder="Tên đăng nhập" autofocus>
                    <label for="inputAccount">Tên đăng nhập</label>
                </div>

                <div class="form-label-group">
                    <input type="password" id="inputPassword" name="MatKhau" class="form-control" placeholder="Mật khẩu">
                    <label for="inputPassword">Mật khẩu</label>
                </div>
                <button class="btn btn-lg btn-primary btn-block" id="btnLogin" type="button">Đăng nhập</button>
                <a href="#" class="text-secondary mt-3 w-100 text-center d-block">Quên mật khẩu?</a>
            }
        </div>
    </div>
</body>
</html>

